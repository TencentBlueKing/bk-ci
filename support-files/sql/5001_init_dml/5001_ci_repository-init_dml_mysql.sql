use devops_ci_repository;
SET NAMES utf8mb4;

-- 初始化代码源提供者
REPLACE INTO T_REPOSITORY_SCM_PROVIDER (ID, PROVIDER_CODE, PROVIDER_TYPE, NAME, `DESC`, SCM_TYPE, LOGO_URL, DOC_URL, CREDENTIAL_TYPE_LIST, API, MERGE, WEBHOOK, WEBHOOK_SECRET_TYPE, WEBHOOK_PROPS, PAC, CREATE_TIME, UPDATE_TIME)
    VALUES (1, 'TGIT', 'GIT', '工蜂 GIT', '工蜂 GIT', 'SCM_GIT', '/ms/artifactory/api/user/artifactories/file/download?filePath=%2Ffile%2Fsvg%2Fcode-Git.svg&logo=true', '/UserGuide/Setup/guidelines-bkdevops-tgit.md', '["OAUTH", "USERNAME_PASSWORD", "TOKEN_USERNAME_PASSWORD", "TOKEN_SSH_PRIVATEKEY"]', true, true, true, 'REQUEST_HEADER', '{"eventTypeList":["PUSH","TAG_PUSH","MERGE_REQUEST","ISSUES","NOTE","REVIEW"],"eventTypeActionMap":{"PUSH":["NEW_BRANCH","PUSH_FILE"],"MERGE_REQUEST":["OPEN","REOPEN","CLOSE","MERGE","PUSH_UPDATE","UPDATE"],"ISSUES":["OPEN","REOPEN","CLOSE","UPDATE"]}}', true, '2025-03-12 00:00:00', '2025-03-12 00:00:00');
REPLACE INTO T_REPOSITORY_SCM_PROVIDER (ID, PROVIDER_CODE, PROVIDER_TYPE, NAME, `DESC`, SCM_TYPE, LOGO_URL, DOC_URL, CREDENTIAL_TYPE_LIST, API, MERGE, WEBHOOK, WEBHOOK_SECRET_TYPE, WEBHOOK_PROPS, PAC, CREATE_TIME, UPDATE_TIME)
    VALUES (2, 'TSVN', 'SVN', '工蜂 SVN', '工蜂 SVN', 'SCM_SVN', '/ms/artifactory/api/user/artifactories/file/download?filePath=%2Ffile%2Fsvg%2Fcode-SVN.svg&logo=true', '/UserGuide/Setup/guidelines-bkdevops-tgit.md', '["USERNAME_PASSWORD", "TOKEN_USERNAME_PASSWORD", "TOKEN_SSH_PRIVATEKEY", "SSH_PRIVATEKEY"]', true, false, true, 'REQUEST_HEADER', '{"eventTypeList":["PUSH"],"eventTypeActionMap":{}}', true, '2025-03-12 00:00:00', '2025-03-12 00:00:00');
REPLACE INTO T_REPOSITORY_SCM_PROVIDER (ID, PROVIDER_CODE, PROVIDER_TYPE, NAME, `DESC`, SCM_TYPE, LOGO_URL, DOC_URL, CREDENTIAL_TYPE_LIST, API, MERGE, WEBHOOK, WEBHOOK_SECRET_TYPE, WEBHOOK_PROPS, PAC, CREATE_TIME, UPDATE_TIME)
    VALUES (3, 'GITHUB', 'GIT', 'GITHUB', 'GITHUB', 'SCM_GIT', '/ms/artifactory/api/user/artifactories/file/download?filePath=%2Ffile%2Fsvg%2Fcode-Github.svg&logo=true', '/UserGuide/Setup/guidelines-bkdevops-githubapp.md', '["OAUTH", "TOKEN_USERNAME_PASSWORD", "TOKEN_SSH_PRIVATEKEY"]', true, true, true, 'APP', '{"eventTypeList":["PUSH","CREATE","PULL_REQUEST","ISSUES","NOTE","REVIEW"],"eventTypeActionMap":{"ISSUES":["OPEN","REOPEN","CLOSE","UPDATE"]}}', true, '2025-03-12 00:00:00', '2025-03-12 00:00:00');
REPLACE INTO T_REPOSITORY_SCM_PROVIDER (ID, PROVIDER_CODE, PROVIDER_TYPE, NAME, `DESC`, SCM_TYPE, LOGO_URL, DOC_URL, CREDENTIAL_TYPE_LIST, API, MERGE, WEBHOOK, WEBHOOK_SECRET_TYPE, WEBHOOK_PROPS, PAC, CREATE_TIME, UPDATE_TIME)
    VALUES (4, 'GITLAB', 'GIT', 'GITLAB', 'GITLAB', 'SCM_GIT', '/ms/artifactory/api/user/artifactories/file/download?filePath=%2Ffile%2Fsvg%2Fcode-Gitlab.svg&logo=true', '/UserGuide/Setup/guidelines-bkdevops-gitlab.md', '["ACCESSTOKEN", "TOKEN_USERNAME_PASSWORD", "TOKEN_SSH_PRIVATEKEY"]', true, true, true, 'REQUEST_HEADER', '{"eventTypeList":["PUSH","TAG_PUSH","MERGE_REQUEST","ISSUES","NOTE","REVIEW"],"eventTypeActionMap":{}}', true, '2025-03-12 00:00:00', '2025-03-12 00:00:00');
REPLACE INTO T_REPOSITORY_SCM_PROVIDER (ID, PROVIDER_CODE, PROVIDER_TYPE, NAME, `DESC`, SCM_TYPE, LOGO_URL, DOC_URL, CREDENTIAL_TYPE_LIST, API, MERGE, WEBHOOK, WEBHOOK_SECRET_TYPE, WEBHOOK_PROPS, PAC, CREATE_TIME, UPDATE_TIME)
    VALUES (5, 'PERFORCE', 'P4', 'Perforce', 'Perforce', 'SCM_P4', '/ms/artifactory/api/user/artifactories/file/download?filePath=%2Ffile%2Fsvg%2Fcode-P4.svg&logo=true', '/UserGuide/Setup/guidelines-bkdevops-perforce.md', '["USERNAME_PASSWORD"]', false, false, true, 'REQUEST_HEADER', '{"eventTypeList":["CHANGE_COMMIT","SHELVE_COMMIT"],"eventTypeActionMap":{}}', false, '2025-03-12 00:00:00', '2025-03-12 00:00:00');


-- 源码管理配置
REPLACE INTO T_REPOSITORY_SCM_CONFIG (ID, SCM_CODE, NAME, PROVIDER_CODE, SCM_TYPE, HOSTS, LOGO_URL, CREDENTIAL_TYPE_LIST, OAUTH_TYPE, OAUTH_SCM_CODE, STATUS, OAUTH2_ENABLED, MERGE_ENABLED, PAC_ENABLED, WEBHOOK_ENABLED, PROVIDER_PROPS, CREATOR, UPDATER, CREATE_TIME, UPDATE_TIME)
    VALUES (1, 'CODE_SVN', '通用 SVN', 'TSVN', 'CODE_SVN', null, '/ms/artifactory/api/user/artifactories/file/download?filePath=%2Ffile%2Fsvg%2Fcode-Gitlab.svg&logo=true', '["TOKEN_USERNAME_PASSWORD","TOKEN_SSH_PRIVATEKEY"]', 'NEW', '', 'SUCCESS', false, false, false, false, '{"providerCode":"TSVN","providerType":"SVN","proxyEnabled":false,"oauth2Enabled":false}', 'system', 'system', '2025-03-12 00:00:00', '2025-03-12 00:00:00');
REPLACE INTO T_REPOSITORY_SCM_CONFIG (ID, SCM_CODE, NAME, PROVIDER_CODE, SCM_TYPE, HOSTS, LOGO_URL, CREDENTIAL_TYPE_LIST, OAUTH_TYPE, OAUTH_SCM_CODE, STATUS, OAUTH2_ENABLED, MERGE_ENABLED, PAC_ENABLED, WEBHOOK_ENABLED, PROVIDER_PROPS, CREATOR, UPDATER, CREATE_TIME, UPDATE_TIME)
    VALUES (4, 'GITHUB', 'GITHUB', 'GITHUB', 'GITHUB', null, '/ms/artifactory/api/user/artifactories/file/download?filePath=%2Ffile%2Fsvg%2Fcode-Github.svg&logo=true', '["OAUTH"]', 'NEW', '', 'DEPLOYING', true, false, true, true, '{"providerCode":"GITHUB","providerType":"GIT","proxyEnabled":false,"oauth2Enabled":false,"httpClientProperties":{"apiUrl":"https://api.github.com/","connectTimeout":5,"readTimeout":30,"writeTimeout":30,"metrics":false}}', 'system', 'system', '2025-03-12 00:00:00', '2025-03-12 00:00:00');
REPLACE INTO T_REPOSITORY_SCM_CONFIG (ID, SCM_CODE, NAME, PROVIDER_CODE, SCM_TYPE, HOSTS, LOGO_URL, CREDENTIAL_TYPE_LIST, OAUTH_TYPE, OAUTH_SCM_CODE, STATUS, OAUTH2_ENABLED, MERGE_ENABLED, PAC_ENABLED, WEBHOOK_ENABLED, PROVIDER_PROPS, CREATOR, UPDATER, CREATE_TIME, UPDATE_TIME)
    VALUES (3, 'CODE_GITLAB', '通用 Gitlab', 'GITLAB', 'CODE_GITLAB', null, '/ms/artifactory/api/user/artifactories/file/download?filePath=%2Ffile%2Fsvg%2Fcode-Gitlab.svg&logo=true', '["ACCESSTOKEN","TOKEN_SSH_PRIVATEKEY"]', 'NEW', '', 'SUCCESS', false, false, false, false, '{"providerCode":"GITLAB","providerType":"GIT","proxyEnabled":false,"oauth2Enabled":false}', 'system', 'system', '2025-03-12 00:00:00', '2025-03-12 00:00:00');
REPLACE INTO T_REPOSITORY_SCM_CONFIG (ID, SCM_CODE, NAME, PROVIDER_CODE, SCM_TYPE, HOSTS, LOGO_URL, CREDENTIAL_TYPE_LIST, OAUTH_TYPE, OAUTH_SCM_CODE, STATUS, OAUTH2_ENABLED, MERGE_ENABLED, PAC_ENABLED, WEBHOOK_ENABLED, PROVIDER_PROPS, CREATOR, UPDATER, CREATE_TIME, UPDATE_TIME)
    VALUES (5, 'CODE_TGIT', '工蜂 TGIT', 'TGIT', 'CODE_TGIT', null, '/ms/artifactory/api/user/artifactories/file/download?filePath=%2Ffile%2Fsvg%2Fcode-Git.svg&logo=true', '["TOKEN_USERNAME_PASSWORD", "TOKEN_SSH_PRIVATEKEY"]', 'NEW', null, 'SUCCESS', false, true, true, true, '{"providerCode":"TGIT","providerType":"GIT","proxyEnabled":false,"oauth2Enabled":false,"httpClientProperties":{"apiUrl":"https://git.code.tencent.com/api/v3","connectTimeout":5,"readTimeout":30,"writeTimeout":30,"metrics":false}}', 'system', 'system', '2025-03-12 00:00:00', '2025-03-12 00:00:00');
REPLACE INTO T_REPOSITORY_SCM_CONFIG (ID, SCM_CODE, NAME, PROVIDER_CODE, SCM_TYPE, HOSTS, LOGO_URL, CREDENTIAL_TYPE_LIST, OAUTH_TYPE, OAUTH_SCM_CODE, STATUS, OAUTH2_ENABLED, MERGE_ENABLED, PAC_ENABLED, WEBHOOK_ENABLED, PROVIDER_PROPS, CREATOR, UPDATER, CREATE_TIME, UPDATE_TIME)
    VALUES (6, 'CODE_P4', 'Perforce', 'P4', 'CODE_P4', null, '/ms/artifactory/api/user/artifactories/file/download?filePath=%2Ffile%2Fsvg%2Fcode-P4.svg&logo=true', '["USERNAME_PASSWORD"]', 'NEW', null, 'SUCCESS', false, false, false, true, '{"providerCode":"P4","providerType":"P4","proxyEnabled":false,"oauth2Enabled":false}', 'system', 'system', '2025-03-12 00:00:00', '2025-03-12 00:00:00');
