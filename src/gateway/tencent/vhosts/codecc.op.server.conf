server {
  listen 80;
  server_name v2.dev.op.codecc.oa.com;

  root /data/codecc/v2.op.codecc.oa.com/dist;
  index index.html index.htm;

  try_files $uri $uri/ /index.html;

#  ### ssl config begin ###
#  listen  ssl;
#  include devops.ssl;
#  # force https-redirects
#  # if ($scheme = http) {
#  #   return 301 https://$server_name$request_uri;
#  # }
#  ### ssl config end ###

  access_log /data/bkee/logs/ci/nginx/codeccop.access.$log_date.log devops_format;
  error_log /data/bkee/logs/ci/nginx/codeccop.error.log;

  location /api/op/ {
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_set_header X-NginX-Proxy true;

    proxy_pass http://9.134.78.69:8090;
    proxy_redirect off;
  }

  location /rest/ {
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_set_header X-NginX-Proxy true;

    proxy_pass http://9.134.78.69:8090;
    proxy_redirect off;
  }
  # set域名区域
#  set $devops_region "DEVNET";

  # server的通用配置
#  include server.common.conf;

  #后台的网关路径
#  include backend.conf;
  
  #前端页面
#  include ./vhosts/codecc.frontend.conf;

}
